FOLDER:HoServer/Services
FILE:{{EVAL:CommUtils.capitalizeFirstLetter(api.second_cat)+'Service.m'}}
//
//  {{EVAL:CommUtils.capitalizeFirstLetter(api.second_cat)+'Service'}}.m
//
//  This file is auto generated by HoServer.
//  Copyright Â© 2020 Hello React. All rights reserved.
//

#import "Constants.h"
#import "{{EVAL:CommUtils.capitalizeFirstLetter(api.second_cat)+'Service'}}.h"

@interface {{EVAL:CommUtils.capitalizeFirstLetter(api.second_cat)+'Service'}}()

@end

@implementation {{EVAL:CommUtils.capitalizeFirstLetter(api.second_cat)+'Service'}}

{{API_START}}

/**
 {{dis_name}}
 {{description}}
 */
- (UNIUrlConnection *){{name}}: {{oc_params}}
{{EVAL:' '.repeat(5 + api.name.length)}}completionHandler: (JsonResponseCallback)completionHandler;
{
    NSDictionary *headers = @{@"token": Constants.token};

    UNIUrlConnection *asyncConnection = [[UNIRest {{EVAL:api.method.toLowerCase()}}:^(UNISimpleRequest *request) {
        NSString *url = [NSString stringWithFormat:@"%@%@%@", SERVER_URL, API_PREFIX, [NSString stringWithFormat:@{{api_route}}{{params}}]];
        [request setUrl:url];
        [request setHeaders:headers];
        if (args != nil) {
            [request setParameters:args];
        }
    }] asJsonAsync:^(UNIHTTPJsonResponse* response, NSError *error) {
        UNIJsonNode *body = response.body;

        if (completionHandler != nil) {
            completionHandler(response, body, error);
        }
    }];

    return asyncConnection;
}

{{API_END}}

@end
